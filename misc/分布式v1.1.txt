局域网分布式协议v1.0

60s尝试接收组播消息
	未收到
		主控初始化、每隔30s组播心跳报文
	已收到
		节点初始化、加入组播，与主控建立点-点连接，同步其它节点信息


主控
	收到节点连接，发送组播消息通知其他节点	//组播-通知其它节点，需要增加该节点
	未收到心跳->通知(组播)->阻塞。
	
节点	
	请求任务->组播->阻塞->本节点查找->
							是->更新状态->通知(组播)
							否->组播请求->最快的点对点回复，建立信道。组播通知
	

定时心跳
节点入网：	1、收到组播心跳包后，向主控单播请求其它节点信息列表。
			2、主控通知其它节点(条件:新节点完成接收列表请求、超时则不处理)，更新数据结构、完毕通知其它节点(条件:收到回应、超时未回应附加断网处理)
				2.1、超时未回应同步开始通知，则在完毕通知中附加断网(掉线)节点信息
节点断网：	1、组播通知更新节点信息，更新主控数据结构定时等待，完毕通知(超时未回应则附加断网节点信息)
新任务请求：1、本地查询条件
			2、满足：组播通知(更新该节点状态)，定时查询回应，超时则单播给主控
			3、不满足：组播请求，定时查询回应，
				3.1、超时返回失败，组播通知(请求结束)
				3.2、单播向回应的第一条请求//可根据本机节点信息列表查询第一个
					3.2.1、本地建立数据结构及转发信道，组播通知，定时查询回应，超时则单播给主控//TODO:
					3.2.2、超时/返回失败，单播向回应的第二条请求
						3.2.2.1、本地建立数据结构及转发信道，组播通知，定时查询回应，超时则单播给主控//TODO: 
						3.2.2.2、超时/返回失败，返回失败，组播通知
任务结束通知：	
			1、本机任务结束：更新数据结构，组播通知，定时查询回应，超时单播给主控
			2、远程机任务结束：单播请求机结束信息、组播更新本节点信息，检查回应，超时未回应单播给主控
				
//TODO:更新掉线节点信息时，掉线节点又立马连入问题
	
主控宕机后普通节点筛选主控

局域网内分布式协议v1.1(仅讨论带主控的网络，暂不讨论图状网络)
	基础：广播、组播、单播(TCP传输控制协议校验类数据、UDP仅传输数据)

节点入网：A广播请求，主控应答，并广播(其它节点阻塞)，收到其它节点单播刷新列表，单播至新节点A，A收到则应答，主控收到A单播则广播所有节点(不再阻塞)
节点断网：A广播请求，主控广播(其它节点阻塞)，其它节点删除A节点则单播至主控，主控单播通知A，A单播应答主控，主控广播，其它节点继续(不再阻塞)
	心跳：主控未收到心跳应答，则广播，其它节点收到则删除指定节点，单播至主控，刷新节点。
	
任务请求：
	阻塞(加锁),本地申请，成功继续(解锁)、失败广播请求，收到单播列表，选择最快(忙节点忽略或发送指定协议应答)；广播最佳节点，建立信道。
任务结束：
	阻塞(加锁),广播，其它节点收到，单播应答，广播解锁
	
	